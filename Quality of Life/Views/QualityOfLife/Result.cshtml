@{
    ViewData["Title"] = "Quality of Life Assessment Results";
    var score = ViewBag.Score as int? ?? 0;
    
    // Determine score category and styling
    string scoreClass = "";
    string statusIcon = "";
    string statusColor = "";
    string recommendationTitle = "";
    string recommendationText = "";
    
    if (score >= 35)
    {
        scoreClass = "score-excellent";
        statusIcon = "fas fa-heart";
        statusColor = "#28a745";
        recommendationTitle = "Excellent Quality of Life";
        recommendationText = "Your pet appears to be doing very well! Continue providing excellent care and monitoring their well-being. Regular check-ups with your veterinarian will help maintain this positive quality of life.";
    }
    else if (score >= 25)
    {
        scoreClass = "score-good";
        statusIcon = "fas fa-exclamation-triangle";
        statusColor = "#007bff";
        recommendationTitle = "Some Areas Need Attention";
        recommendationText = "Your pet is showing some concerning signs that warrant closer observation. Consider scheduling a consultation with your veterinarian to discuss ways to improve their comfort and well-being.";
    }
    else if (score >= 15)
    {
        scoreClass = "score-concerning";
        statusIcon = "fas fa-exclamation-circle";
        statusColor = "#ffc107";
        recommendationTitle = "Quality of Life Concerns";
        recommendationText = "Your pet's quality of life appears to be compromised. A veterinary consultation is strongly recommended to discuss treatment options and comfort measures that could improve their well-being.";
    }
    else
    {
        scoreClass = "score-poor";
        statusIcon = "fas fa-heart-broken";
        statusColor = "#dc3545";
        recommendationTitle = "Significant Quality of Life Issues";
        recommendationText = "Your pet appears to be experiencing significant discomfort or suffering. It's important to have an immediate discussion with your veterinarian about all available options, including end-of-life care considerations.";
    }
}

<div class="container py-5">
    <div class="result-container">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="hero-title">
                <i class="fas fa-clipboard-check text-primary me-3"></i>
                Assessment Results
            </h1>
            <p class="hero-subtitle">Your Pet's Quality of Life Evaluation</p>
        </div>

        <!-- Score Display -->
        <div class="pawpal-card fade-in-up mb-4">
            <div class="pawpal-card-body text-center">
                <div class="mb-4">
                    <i class="@statusIcon pulse" style="font-size: 4rem; color: @statusColor;"></i>
                </div>
                
                <h2 class="mb-3" style="color: @statusColor; font-weight: 700;">@recommendationTitle</h2>
                
                <div class="score-display">@score<span style="font-size: 2rem; color: #6c757d;">/40</span></div>
                
                <div class="progress mb-4" style="height: 15px; border-radius: 10px;">
                    <div class="progress-bar" role="progressbar" 
                         style="width: @((score * 100 / 40))%; background: linear-gradient(90deg, @statusColor, @statusColor);" 
                         aria-valuenow="@score" aria-valuemin="0" aria-valuemax="40">
                    </div>
                </div>
                
                <p class="lead mb-0" style="color: #6c757d;">
                    Score Range: @score out of 40 possible points
                </p>
            </div>
        </div>

        <!-- Interpretation -->
        <div class="pawpal-card fade-in-up mb-4">
            <div class="pawpal-card-body">
                <div class="score-interpretation @scoreClass">
                    <div class="d-flex align-items-start">
                        <i class="@statusIcon me-3 mt-1" style="font-size: 1.5rem;"></i>
                        <div>
                            <h5 class="mb-3">What This Score Means</h5>
                            <p class="mb-0">@recommendationText</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Score Breakdown -->
        <div class="pawpal-card fade-in-up mb-4">
            <div class="pawpal-card-body">
                <h5 class="mb-4">
                    <i class="fas fa-chart-bar text-primary me-2"></i>
                    Understanding Quality of Life Scores
                </h5>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-3 rounded" style="background: #d4edda;">
                            <i class="fas fa-smile text-success me-3" style="font-size: 1.5rem;"></i>
                            <div>
                                <strong>35-40 Points</strong><br>
                                <small class="text-muted">Excellent quality of life</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-3 rounded" style="background: #d1ecf1;">
                            <i class="fas fa-meh text-info me-3" style="font-size: 1.5rem;"></i>
                            <div>
                                <strong>25-34 Points</strong><br>
                                <small class="text-muted">Some concerns, monitor closely</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-3 rounded" style="background: #fff3cd;">
                            <i class="fas fa-frown text-warning me-3" style="font-size: 1.5rem;"></i>
                            <div>
                                <strong>15-24 Points</strong><br>
                                <small class="text-muted">Low quality, vet consultation recommended</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-3 rounded" style="background: #f8d7da;">
                            <i class="fas fa-sad-tear text-danger me-3" style="font-size: 1.5rem;"></i>
                            <div>
                                <strong>Below 15 Points</strong><br>
                                <small class="text-muted">Significant suffering, immediate vet consultation</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="pawpal-card fade-in-up mb-4">
            <div class="pawpal-card-body">
                <h5 class="mb-4">
                    <i class="fas fa-lightbulb text-warning me-2"></i>
                    Recommended Next Steps
                </h5>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="text-center p-3">
                            <i class="fas fa-user-md text-primary mb-3" style="font-size: 2.5rem;"></i>
                            <h6>Consult Your Veterinarian</h6>
                            <p class="small text-muted">Share these results with your vet for professional guidance</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="text-center p-3">
                            <i class="fas fa-calendar-check text-success mb-3" style="font-size: 2.5rem;"></i>
                            <h6>Regular Monitoring</h6>
                            <p class="small text-muted">Reassess your pet's condition regularly</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="text-center p-3">
                            <i class="fas fa-heart text-danger mb-3" style="font-size: 2.5rem;"></i>
                            <h6>Comfort Care</h6>
                            <p class="small text-muted">Focus on keeping your pet comfortable and loved</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center">
            <a href="@Url.Action("Index", "QualityOfLife")" class="btn btn-pawpal-outline btn-lg me-3 mb-3">
                <i class="fas fa-redo me-2"></i>
                Take Assessment Again
            </a>
            <button onclick="window.print()" class="btn btn-pawpal-primary btn-lg me-3 mb-3">
                <i class="fas fa-print me-2"></i>
                Print Results
            </button>
            <a href="@Url.Action("Index", "Home")" class="btn btn-pawpal-outline btn-lg mb-3">
                <i class="fas fa-home me-2"></i>
                Back to Home
            </a>
        </div>

        <!-- Disclaimer -->
        <div class="alert alert-info mt-4" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Important:</strong> This assessment is a tool to help you evaluate your pet's quality of life. 
            It should not replace professional veterinary advice. Always consult with your veterinarian for medical decisions regarding your pet's health and well-being.
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Add fade-in animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                }
            });
        });

        document.querySelectorAll('.pawpal-card').forEach((card) => {
            observer.observe(card);
        });

        // Animate progress bar
        window.addEventListener('load', function() {
            const progressBar = document.querySelector('.progress-bar');
            if (progressBar) {
                progressBar.style.transition = 'width 2s ease-in-out';
            }
        });
    </script>
    
    <style>
        @@media print {
            .btn, .alert {
                display: none !important;
            }
            .pawpal-card {
                box-shadow: none !important;
                border: 1px solid #dee2e6 !important;
            }
            .hero-section {
                padding: 20px 0 !important;
            }
        }
    </style>
}
