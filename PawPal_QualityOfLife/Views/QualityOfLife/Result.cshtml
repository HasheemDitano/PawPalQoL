@{
    ViewData["Title"] = "Quality of Life Assessment Results";
    var score = ViewBag.Score as int? ?? 0;
    
    // Determine score category and styling
    string scoreClass = "";
    string statusIcon = "";
    string statusColor = "";
    string recommendationTitle = "";
    string recommendationText = "";
    
    if (score >= 35)
    {
        scoreClass = "score-excellent";
        statusIcon = "fas fa-heart";
        statusColor = "#28a745";
        recommendationTitle = "EXCELLENT QUALITY OF LIFE";
        recommendationText = "Your pet appears to be doing very well! Continue providing excellent care and monitoring their well-being. Regular check-ups with your veterinarian will help maintain this positive quality of life.";
    }
    else if (score >= 25)
    {
        scoreClass = "score-good";
        statusIcon = "fas fa-exclamation-triangle";
        statusColor = "#007bff";
        recommendationTitle = "SOME AREAS NEED ATTENTION";
        recommendationText = "Your pet is showing some concerning signs that warrant closer observation. Consider scheduling a consultation with your veterinarian to discuss ways to improve their comfort and well-being.";
    }
    else if (score >= 15)
    {
        scoreClass = "score-concerning";
        statusIcon = "fas fa-exclamation-circle";
        statusColor = "#ffc107";
        recommendationTitle = "QUALITY OF LIFE CONCERNS";
        recommendationText = "Your pet's quality of life appears to be compromised. A veterinary consultation is strongly recommended to discuss treatment options and comfort measures that could improve their well-being.";
    }
    else
    {
        scoreClass = "score-poor";
        statusIcon = "fas fa-heart-broken";
        statusColor = "#dc3545";
        recommendationTitle = "SIGNIFICANT QUALITY OF LIFE ISSUES";
        recommendationText = "Your pet appears to be experiencing significant discomfort or suffering. It's important to have an immediate discussion with your veterinarian about all available options, including end-of-life care considerations.";
    }
}

<div class="container py-5">
    <div class="result-container">
        <!-- Header -->
        <div class="text-center mb-5 fade-in-up">
            <h1 style="font-size: 3.5rem; font-weight: 900; color: var(--pawpal-primary); text-transform: uppercase; letter-spacing: -1px;">
                <i class="fas fa-clipboard-check me-3 pulse"></i>
                RESULTS
            </h1>
            <p style="font-size: 1.4rem; font-weight: 600; color: var(--pawpal-gray);">Your Pet's Quality of Life Evaluation</p>
            <div class="mt-3">
                <i class="fas fa-paw" style="font-size: 1.5rem; color: var(--pawpal-primary); opacity: 0.4; margin: 0 8px;"></i>
                <i class="fas fa-paw" style="font-size: 1.5rem; color: var(--pawpal-primary); opacity: 0.6; margin: 0 8px;"></i>
                <i class="fas fa-paw" style="font-size: 1.5rem; color: var(--pawpal-primary); margin: 0 8px;"></i>
                <i class="fas fa-paw" style="font-size: 1.5rem; color: var(--pawpal-primary); opacity: 0.6; margin: 0 8px;"></i>
                <i class="fas fa-paw" style="font-size: 1.5rem; color: var(--pawpal-primary); opacity: 0.4; margin: 0 8px;"></i>
            </div>
        </div>

        <!-- Score Display -->
        <div class="pawpal-card fade-in-up mb-4">
            <div class="pawpal-card-body text-center py-5">
                <div class="mb-4">
                    <i class="@statusIcon pulse" style="font-size: 5rem; color: @statusColor;"></i>
                </div>
                
                <h2 class="mb-4" style="color: @statusColor; font-weight: 900; font-size: 2.2rem; text-transform: uppercase; letter-spacing: -0.5px;">
                    @recommendationTitle
                </h2>
                
                <div class="score-display">@score<span style="font-size: 2.5rem; color: #6c757d; font-weight: 700;">/40</span></div>
                
                <div class="progress mb-4" style="height: 20px; border-radius: 15px; background: #e9ecef;">
                    <div class="progress-bar" role="progressbar" 
                         style="width: @((score * 100 / 40))%; background: linear-gradient(90deg, @statusColor, @statusColor); border-radius: 15px; font-weight: 700;" 
                         aria-valuenow="@score" aria-valuemin="0" aria-valuemax="40">
                        @((score * 100 / 40).ToString("F0"))%
                    </div>
                </div>
                
                <p class="lead mb-0" style="color: var(--pawpal-gray); font-weight: 700; font-size: 1.2rem;">
                    Score Range: <span style="color: var(--pawpal-primary);">@score</span> out of 40 possible points
                </p>
            </div>
        </div>

        <!-- Interpretation -->
        <div class="pawpal-card fade-in-up mb-4" style="animation-delay: 0.1s;">
            <div class="pawpal-card-body">
                <div class="score-interpretation @scoreClass">
                    <div class="d-flex align-items-start">
                        <i class="@statusIcon me-4 mt-1" style="font-size: 2rem;"></i>
                        <div>
                            <h5 class="mb-3" style="font-size: 1.6rem;">WHAT THIS SCORE MEANS</h5>
                            <p class="mb-0" style="font-size: 1.1rem;">@recommendationText</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Score Breakdown -->
        <div class="pawpal-card fade-in-up mb-4" style="animation-delay: 0.2s;">
            <div class="pawpal-card-body">
                <h4 class="mb-4 text-center" style="font-weight: 900; text-transform: uppercase;">
                    <i class="fas fa-chart-bar me-2"></i>
                    UNDERSTANDING THE SCORES
                </h4>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-4 rounded" style="background: linear-gradient(135deg, #d4edda, #c3e6cb); border: 3px solid #28a745; transition: all 0.3s ease;">
                            <i class="fas fa-smile text-success me-3" style="font-size: 2rem;"></i>
                            <div>
                                <strong style="font-size: 1.2rem; font-weight: 800;">35-40 Points</strong><br>
                                <small style="font-weight: 600; color: #155724;">Excellent quality of life</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-4 rounded" style="background: linear-gradient(135deg, #d1ecf1, #b8daff); border: 3px solid #007bff; transition: all 0.3s ease;">
                            <i class="fas fa-meh text-info me-3" style="font-size: 2rem;"></i>
                            <div>
                                <strong style="font-size: 1.2rem; font-weight: 800;">25-34 Points</strong><br>
                                <small style="font-weight: 600; color: #004085;">Some concerns, monitor closely</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-4 rounded" style="background: linear-gradient(135deg, #fff3cd, #ffeaa7); border: 3px solid #ffc107; transition: all 0.3s ease;">
                            <i class="fas fa-frown text-warning me-3" style="font-size: 2rem;"></i>
                            <div>
                                <strong style="font-size: 1.2rem; font-weight: 800;">15-24 Points</strong><br>
                                <small style="font-weight: 600; color: #856404;">Low quality, vet consultation recommended</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="d-flex align-items-center p-4 rounded" style="background: linear-gradient(135deg, #f8d7da, #f5c6cb); border: 3px solid #dc3545; transition: all 0.3s ease;">
                            <i class="fas fa-sad-tear text-danger me-3" style="font-size: 2rem;"></i>
                            <div>
                                <strong style="font-size: 1.2rem; font-weight: 800;">Below 15 Points</strong><br>
                                <small style="font-weight: 600; color: #721c24;">Significant suffering, immediate vet consultation</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="pawpal-card fade-in-up mb-4" style="animation-delay: 0.3s;">
            <div class="pawpal-card-body">
                <h4 class="mb-5 text-center" style="font-weight: 900; text-transform: uppercase;">
                    <i class="fas fa-lightbulb me-2"></i>
                    RECOMMENDED NEXT STEPS
                </h4>
                
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="text-center p-4 rounded" style="background: var(--pawpal-light); border: 2px solid rgba(255, 107, 53, 0.2); transition: all 0.3s ease;">
                            <i class="fas fa-user-md mb-4 float" style="font-size: 3.5rem; color: var(--pawpal-primary);"></i>
                            <h5 style="font-weight: 800; color: var(--pawpal-primary);">CONSULT VET</h5>
                            <p class="small mb-0" style="font-weight: 600; color: var(--pawpal-gray);">Share these results with your vet for professional guidance</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="text-center p-4 rounded" style="background: var(--pawpal-light); border: 2px solid rgba(255, 107, 53, 0.2); transition: all 0.3s ease;">
                            <i class="fas fa-calendar-check mb-4 float" style="font-size: 3.5rem; color: var(--pawpal-success); animation-delay: 0.2s;"></i>
                            <h5 style="font-weight: 800; color: var(--pawpal-success);">MONITOR REGULARLY</h5>
                            <p class="small mb-0" style="font-weight: 600; color: var(--pawpal-gray);">Reassess your pet's condition regularly</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="text-center p-4 rounded" style="background: var(--pawpal-light); border: 2px solid rgba(255, 107, 53, 0.2); transition: all 0.3s ease;">
                            <i class="fas fa-heart mb-4 float" style="font-size: 3.5rem; color: var(--pawpal-danger); animation-delay: 0.4s;"></i>
                            <h5 style="font-weight: 800; color: var(--pawpal-danger);">COMFORT CARE</h5>
                            <p class="small mb-0" style="font-weight: 600; color: var(--pawpal-gray);">Focus on keeping your pet comfortable and loved</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center fade-in-up" style="animation-delay: 0.4s;">
            <a href="@Url.Action("Index", "QualityOfLife")" class="btn btn-pawpal-primary btn-lg me-3 mb-3 px-4 py-3">
                <i class="fas fa-redo me-2"></i>
                New Assessment
            </a>
            <button onclick="window.print()" class="btn btn-pawpal-outline btn-lg me-3 mb-3 px-4 py-3">
                <i class="fas fa-print me-2"></i>
                Print Results
            </button>
        </div>

        <!-- Disclaimer -->
        <div class="alert fade-in-up mt-5" role="alert" style="background: linear-gradient(135deg, #e3f2fd, #bbdefb); border: 3px solid #2196f3; border-radius: 20px; padding: 25px; animation-delay: 0.5s;">
            <div class="d-flex align-items-start">
                <i class="fas fa-info-circle me-3" style="font-size: 2rem; color: #1976d2;"></i>
                <div>
                    <h6 style="font-weight: 800; color: #1976d2; text-transform: uppercase; margin-bottom: 10px;">IMPORTANT DISCLAIMER</h6>
                    <p class="mb-0" style="font-weight: 600; color: #0d47a1;">
                        This assessment is a tool to help you evaluate your pet's quality of life. 
                        It should not replace professional veterinary advice. Always consult with your veterinarian for medical decisions regarding your pet's health and well-being.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Add fade-in animation on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.pawpal-card, .fade-in-up').forEach((card) => {
            observer.observe(card);
        });

        // Animate progress bar
        window.addEventListener('load', function() {
            const progressBar = document.querySelector('.progress-bar');
            if (progressBar) {
                progressBar.style.width = '0%';
                setTimeout(() => {
                    progressBar.style.transition = 'width 2s ease-in-out';
                    progressBar.style.width = '@((score * 100 / 40))%';
                }, 100);
            }
        });

        // Add hover effects to score breakdown cards
        document.querySelectorAll('.row .col-md-6 > div').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05)';
                this.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.15)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = 'none';
            });
        });

        // Add hover effects to next steps cards
        document.querySelectorAll('.row .col-md-4 > div').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px)';
                this.style.boxShadow = '0 10px 30px rgba(255, 107, 53, 0.2)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });
    </script>
    
    <style>
        @@media print {
            .btn, .alert {
                display: none !important;
            }
            .pawpal-card {
                box-shadow: none !important;
                border: 1px solid #dee2e6 !important;
            }
        }
    </style>
}
